---
title: "Proje Adı"
format: html
number-sections: true
---

**Proje sayfamıza hoş geldiniz.**

*Projemizle ilgili güncellemelerden haberdar olmak için bu alanı takip edin.*

(Aşağıdaki başlıklar örnek olarak verilmiştir; lütfen gerektiği şekilde düzenlemekten çekinmeyin.)

# Proje Genel Bakış ve Kapsamı

xxxxxx

# Veri

xxxxxx

## Veri Kaynağı

xxxxxx

## Veri Hakkında Genel Bilgiler

xxxxxx

## Tercih Sebebi

xxxxxx

## Ön İşleme


install.packages("readxl") 
install.packages("dplyr")
install.packages("ggplot2")
install.packages("tidyr") 
install.packages("kableExtra") 
install.packages("openxlsx") 
install.packages(c("stringr", "scales", "plotly", "ggrepel", "ggthemes","patchwork"))

library(patchwork)
library(readxl) 
library(openxlsx) 
library(dplyr)
library(ggplot2) 
library(tidyr) 
library(stringr) 
library(scales) 
library(plotly)
library(ggrepel) 
library(ggthemes)
library(kableExtra)


# Analiz

turkiye_geneli <- read_excel("veri/turkiye_geneli.xlsx")
head(turkiye_geneli)
Kadin_Erkek_Yas_Dagilimlari <- read_excel("veri/Kadin_Erkek_Yas_Dagilimlari.xlsx")
head(Kadin_Erkek_Yas_Dagilimlari)
evlilik_suresi<- read_excel("veri/Evlilik_suresi_Turkiye_geneli.xlsx")
head(evlilik_suresi)

# erdi yasmin Evlilik süresine göre boşanma sayısı grafiği
#ortalama_evlilik_suresi_bazli<-apply(evlilik_suresi,2,mean)

yildan_az_1<-sum(evlilik_suresi[2])
yil_1_5<-sum(evlilik_suresi[3:7])
yil_6_10<-sum(evlilik_suresi[8:12])
yil_11_15<-sum(evlilik_suresi[13:17])
yil_16_20<-sum(evlilik_suresi[18:22])
bosanma_sayisi <- data.frame(
  Evlilik_Suresi = c("0-1 yıldan az", "1-5 yıl", "6-10 yıl", "11-15 yıl", "16-20+ yıl"),
  total_bosanma_sayisi<-c(yildan_az_1,yil_1_5,yil_6_10,yil_11_15,yil_16_20)
)
bosanma_sayisi$Evlilik_Suresi <- factor(
  bosanma_sayisi$Evlilik_Suresi,
  levels = c("0-1 yıldan az", "1-5 yıl", "6-10 yıl", "11-15 yıl", "16-20+ yıl")
)
print(bosanma_sayisi)
bosanma_sayisi|> ggplot(aes(x=Evlilik_Suresi, y=total_bosanma_sayisi)) + geom_bar(stat = "identity", fill = "skyblue",width = 0.5)+
geom_text(aes(label = total_bosanma_sayisi), vjust = -0.5, size = 3)+labs(
      title = "Evlilik Suresine Gore Bosanma Sayısı",
    x = "Evlilik Suresi",
    y = "Toplam Boşanma Sayısı"
  ) +
  theme_light() +
  theme(
    plot.title = element_text(hjust = 0.5, size = 12, face = "bold")
  )
#erdi yasmin (sütun sıralasmını levels kodu ile yaptık chatgpt den yardım aldık)

#erdi yasmin (2) (Evlilik süresi ve yıllara göre boşanma sayısının karşılaştırılması)
yillar_0_1<-vector()
for (i in seq(1,24)) 
{yillar_0_1[i]<-sum(evlilik_suresi[i,2])

}
yillar_1_5<-vector()
for (i in seq(1,24)) 
{yillar_1_5[i]<-sum(evlilik_suresi[i,3:7])

}
yillar_6_10<-vector()
for (i in seq(1,24)) 
{yillar_6_10[i]<-sum(evlilik_suresi[i,8:12])

}
yillar_11_15<-vector()
for (i in seq(1,24)) 
{yillar_11_15[i]<-sum(evlilik_suresi[i,13:17])

}

yillar_16_20<-vector()
for (i in seq(1,24)) 
{yillar_16_20[i]<-sum(evlilik_suresi[i,18:22])

}
yillar <-vector()
for(i in seq(1,24))
{yillar[i]<-evlilik_suresi[i,1]}

yillar <- as.numeric (yillar)
yillara_gore_bs <- data.frame(
  'yil_0_1'=yillar_0_1,
  `yil_1_5` = yillar_1_5,
  `yil_6_10` = yillar_6_10,
  `yil_11_15` = yillar_11_15,
  `yil_16_20` = yillar_16_20)

yillara_gore_bs$Yil <- yillar

df_long <- yillara_gore_bs %>% pivot_longer(cols = -Yil, names_to = "Evlilik_Suresi", values_to = "Deger")
  
df_long$Evlilik_Suresi <- factor(df_long$Evlilik_Suresi,
  levels = c("yil_0_1", "yil_1_5", "yil_6_10", "yil_11_15", "yil_16_20")
)

ggplot(df_long,aes(x = Yil, y = Deger, color = Evlilik_Suresi)) +
  geom_line(size = 1.2) + labs(
      title = "Yıllara Gore Bosanma Sayıları",
    x = "Yıllar",
    y = "Toplam Bosanma Sayısı"
  ) + theme_minimal()+
  scale_x_continuous(breaks = seq(min(df_long$Yil), max(df_long$Yil), by = 1))+theme( axis.text.x = element_text(angle = 90, hjust = 1))+theme(plot.title = element_text(hjust = 0.5, size = 12, face = "bold")
  )

Yas_Farki_Turkiye_geneli <- read_excel("veri/Yas_Farki_Turkiye_geneli.xlsx")
head(Yas_Farki_Turkiye_geneli)
#yasmin erdi 3 bölgelere göre erkek kadın boşanma-start

ornek <- read_excel("veri/yasmin-erdi/ornek.xlsx")
ornek$Yil <- as.numeric (ornek$Yil)
str(ornek)


veri_long <- ornek %>% pivot_longer(cols = -c(Kadin_Yas_Grubu, Yil),  names_to = "Bolge", values_to = "Deger")





# 6 yıllık dönemleri tanımlayalım
veri_long <- veri_long %>%
  mutate(Donem = case_when(
    Yil %in% 2001:2006 ~ "2001–2006",
    Yil %in% 2007:2012 ~ "2007–2012",
    Yil %in% 2013:2018 ~ "2013–2018",
    Yil %in% 2019:2024 ~ "2019–2024",
    TRUE ~ NA_character_
  )) %>%
  filter(!is.na(Donem))  # sadece belirli dönemler kalsın

# Grafik çizimi: 4 facet, her biri bir dönem
ggplot(veri_long, aes(x = Deger , y = Kadin_Yas_Grubu, color = Bolge)) +
  geom_point(position = position_jitter(width = 0.1), size = 1, alpha = 1) +
  facet_wrap(~ Donem, ncol = 2) +
  labs(title = "Kadın Yaş Gruplarına Gore Bolgesel Dağılım (2001–2024)",
    x = "Bosanma Sayısı",
    y = "Kadın Yaş Aralığı",
    color = "Bolge") +theme_minimal() +theme(axis.text.x = element_text(angle = 0, hjust = 1))+ scale_x_continuous(limits = c(0, 20000),         
    breaks = seq(0, 20000, 5000))




str(veri_long)

## Keşifsel Veri Analizi

Durum <- c("evlenme_sayisi","bosanma_sayisi")

grafik <- turkiye_geneli |> ggplot() +
  geom_line(aes(x = yil, y = evlenme_sayisi, color = "Evlenme Sayısı",group=1), size = 1.7) +
  geom_line(aes(x = yil, y = bosanma_sayisi, color = "Boşanma Sayısı",group=1), size = 1.7) +
  scale_color_manual(values = c("Evlenme Sayısı" = "blue", "Boşanma Sayısı" = "red")) +
  scale_y_continuous(breaks = seq(0, 700000, by = 50000), labels = comma) +
  labs(
    title = "Türkiye'de Yıllara Göre Evlenme ve Boşanma Sayıları",
    x = "Yıl",
    y = "Kişi Sayısı",
    color = "Durum") +
  theme( axis.text.x = element_text(angle = 90, hjust = 1))

grafik

## Trend Analizi

## Model Uydurma

## Sonuçlar

xxxxxx

# Sonuçlar ve Ana Çıkarımlar

xxxxxx
